(()=>{"use strict";let e=(e,t=500)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!0,e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t))},t=(t,n=500)=>t.hidden?((e,t=500)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden&&(e.hidden=!1);let n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin,padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide")}),t)}})(t,n):e(t,n);var n,o;!function(){const e=document.querySelector(".icon-menu"),t=document.querySelector(".menu__body");e&&e.addEventListener("click",(function(n){e.classList.toggle("_active"),document.body.classList.toggle("_lock"),t.classList.toggle("_active")}))}(),n=function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(o=new Image).onload=o.onerror=function(){n(2==o.height)},o.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",function(){let e=document.querySelectorAll(".ibg");for(var t=0;t<e.length;t++)e[t].querySelector("img")&&(e[t].style.backgroundImage="url("+e[t].querySelector("img").getAttribute("src")+")")}(),document.addEventListener("DOMContentLoaded",(n=>{document.documentElement.classList.add("_loaded"),function(){const e=document.querySelector(".header");new IntersectionObserver((function(t){t[0].isIntersecting?e.classList.remove("_scroll"):e.classList.add("_scroll")}),{}).observe(e)}(),document.addEventListener("click",(function(e){const t=e.target;if(t.hasAttribute("data-search-location")||t.closest("[data-search-location]")){const e=t.closest("[data-search-location]"),n=e.nextElementSibling;n.classList.toggle("_show-search");const o=n.querySelector("input");e.querySelector("input").value.length?o.value=e.querySelector("input").value:o.value="";const a=o.value.length;setTimeout((function(){o.setSelectionRange(a,a),o.focus()}),300),i(o,s,r)}else if(!t.closest(".search-destination__body")&&document.querySelector(".search-destination__body._show-search"))document.querySelector(".search-destination__body").classList.remove("_show-search");else if(t.closest(".autocomplete-destination__button")){const e=t.closest(".autocomplete-destination__button").querySelector(".autocomplete-destination__body").firstElementChild.textContent,n=document.querySelector("[data-search-location]");n.querySelector("input").value=e,n.querySelector(".header-search-destination__place").textContent=e,n.nextElementSibling.querySelector("input").value=e,n.nextElementSibling.classList.remove("_show-search")}else t.closest(".main-search__date")&&!t.classList.contains("date-picker__btn-close")||!document.querySelector(".main-search__date.show-date-picker")?t.closest(".people-quantity__button")?(t.closest(".people-quantity").classList.add("_opened"),window.matchMedia("(max-width: 768px)").matches&&document.body.classList.toggle("_lock")):t.classList.contains("people-quantity__done")?t.closest(".people-quantity").classList.remove("_opened"):t.closest(".people-quantity__inner")&&!t.classList.contains("people-quantity__close")||!document.querySelector(".people-quantity._opened")?(t.classList.contains("video__play")||t.closest(".video__item"))&&(e.preventDefault(),console.log(t),function(e){const t=e.closest(".about__video");let n=t.querySelector("video");n.paused?(n.muted&&n.removeAttribute("muted"),n.play(),n.setAttribute("controls",""),t.classList.add("_playing")):(n.pause(),n.removeAttribute("controls"),t.classList.remove("_playing"))}(t)):(document.querySelector(".people-quantity._opened").classList.remove("_opened"),document.body.classList.remove("_lock")):(document.querySelector(".main-search__date.show-date-picker").classList.remove("show-date-picker"),document.body.classList.remove("_lock"))})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(document.querySelector(".search-destination__body._show-search")?document.querySelector(".search-destination__body._show-search").classList.remove("_show-search"):document.querySelector(".main-search__date.show-date-picker")?(document.querySelector(".main-search__date.show-date-picker").classList.remove("show-date-picker"),document.body.classList.remove("_lock")):document.querySelector(".people-quantity._opened")&&document.querySelector(".people-quantity._opened").classList.remove("_opened"))}));const o=document.querySelector(".search-destination__body"),a=o.querySelector("input");let s=o.querySelector(".search-destination__autocomplete");const r=s.innerHTML;function i(e,t,n){const o=e.value;o.length<1?(t.innerHTML="",t.innerHTML+=n):fetch("https://olegmakc.github.io/UnwindCabins/files/country.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((e=>e.json())).then((e=>{let n=e.filter((e=>e.name.toLowerCase().startsWith(`${o.toLowerCase()}`)));t.innerHTML="",function(e,t){let n='<ul class="autocomplete-destination__list">',o="</ul>";e.length>0?(e.forEach(((e,t)=>{if(t<6){let t=`\n\t\t\t\t\t\t<li class="autocomplete-destination__item">\n\t\t\t\t\t\t\t<button type="button" class="autocomplete-destination__button">\n\t\t\t\t\t\t\t\t<div class="autocomplete-destination__icon _icon-location"></div>\n\t\t\t\t\t\t\t\t<div class="autocomplete-destination__body">\n\t\t\t\t\t\t\t\t\t<div class="autocomplete-destination__place">${e.name}</div>\n\t\t\t\t\t\t\t\t\t<div class="autocomplete-destination__subtext">${e.code}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</li>`;n+=t}})),n+=o,t.innerHTML+=n):t.innerHTML+='<h2 class="autocomplete-destination__title">Search by destination, or landmark</h2>',n+=o}(n,t)}))}i(a,s,r),a.addEventListener("input",(function(e){i(e.target,s,r)})),function(){const e=document.querySelectorAll(".menu__link[data-goto]");if(e.length>0){function n(e){const t=e.target;if(t.dataset.goto&&document.querySelector(t.dataset.goto)){e.preventDefault();const n=document.querySelector(t.dataset.goto),o=document.querySelector(".header__wrapper").offsetHeight,a=n.getBoundingClientRect().top-o+scrollY;let s=document.querySelector(".icon-menu");s.classList.contains("_active")&&(document.body.classList.remove("_lock"),s.classList.remove("_active"),document.querySelector(".menu__body").classList.remove("_active")),window.scrollTo({top:a,behavior:"smooth"})}}e.forEach((e=>{e.addEventListener("click",n)}))}const t=new IntersectionObserver((function(e,t){e.forEach(((e,t,n)=>{const o=e.target.getAttribute("id");if(e.isIntersecting){const e=document.querySelector(`.menu__link[data-goto='#${o}']`);document.querySelector(".menu__link[data-goto]._active")&&document.querySelector(".menu__link[data-goto]._active").classList.remove("_active"),e.classList.add("_active")}else n[t+1]&&!n[t+1].isIntersecting&&document.querySelector(".menu__link[data-goto]._active")&&document.querySelector(".menu__link[data-goto]._active").classList.remove("_active")}))}),{rootMargin:"-20px",threshold:[.3,.4,.6,.7]});document.querySelectorAll("[id][class^=page__]").forEach((e=>{t.observe(e)}))}(),function(){const e=document.querySelectorAll("[data-rating]");e.length>0&&function(){let t,n;function o(e){a(e),s(),e.hasAttribute("data-rating-set")&&function(e){const t=e.querySelectorAll(".rating__item");for(let o=0;o<t.length;o++){const i=t[o];i.addEventListener("mouseover",(t=>{a(e),s(i.value)})),i.addEventListener("mouseleave",(e=>{s()})),i.addEventListener("click",(t=>{a(e),e.dataset.ajax?r(i.value,e):(n.innerHTML=o+1,s())}))}}(e)}function a(e){t=e.querySelector(".rating__active"),n=e.querySelector(".rating__value")}function s(e=n.innerHTML){const o=e/.05;t.style.width=`${o}%`}async function r(e,t){if(!t.classList.contains("rating__sending")){t.classList.add("rating__sending");let e=await fetch("files/rating.json",{method:"GET"});if(e.ok){const o=(await e.json()).ratingValue;n.innerHTML=o,s(),t.classList.remove("rating__sending")}else alert("Error"),t.classList.remove("rating__sending")}}e.forEach((e=>{o(e)}))}()}(),function(){let e=document.querySelectorAll("form");if(e.length>0)for(let a=0;a<e.length;a++){const r=e[a];r.addEventListener("submit",(e=>{let a=r.querySelectorAll("input[data-required]");if(a.length>0){let r={value:0};const[m,p]=t(a,{dataAttribute:"required",separator:",",searchIndex:0});if(m.length>0&&n(m,r),p.length>0)for(let e=0;e<p.length;e++){let n=p[e];const a={};let m=n.dataset.required.split(",");const[y,g]=t(m,{dataAttribute:null,separator:":",searchIndex:1});if(y.length>0)for(let e=0;e<y.length;e++){const t=(u=String(y[e]).toLowerCase()).charAt(0).toUpperCase()+u.slice(1);let a;switch(t){case"Phone":a=c(n.value),a||(r.value++,s(n),n.classList.add("input-error")),o(n,"Phone",r);break;case"Email":a=d(n.value),a||(r.value++,s(n),n.classList.add("input-error")),o(n,"Email",r);break;default:console.log(`Doesn't know how to validate that (${t}) type`)}}g.length>0&&(i(g,a),l(n,a,r))}r.value>0&&(e.target.querySelector('button[type="submit"]').classList.add("_error"),e.preventDefault())}var u}))}function t(e,t){let n,o;return null!==t.dataAttribute?(n=Array.from(e).filter(((e,n)=>!e.dataset[t.dataAttribute].split(`${t.separator}`)[t.searchIndex])),o=Array.from(e).filter(((e,n)=>e.dataset[t.dataAttribute].split(`${t.separator}`)[t.searchIndex]))):(n=Array.from(e).filter(((e,n)=>!String(e).split(`${t.separator}`)[t.searchIndex])),o=Array.from(e).filter(((e,n)=>String(e).split(`${t.separator}`)[t.searchIndex]))),[n,o]}function n(e,t){for(let n=0;n<e.length;n++){const o=e[n];""===o.value&&(t.value++,o.classList.add("input-error"),s(o)),o.addEventListener("change",(e=>{const n=e.target;""===n.value?(t.value++,s(o),o.classList.add("input-error")):(t.value<1?t.value=0:t.value--,r(n),o.classList.contains("input-error")&&o.classList.remove("input-error"))}))}}function o(e,t,n){e.addEventListener("change",(e=>{let o,s=e.target;switch(t){case"Phone":o=c(s.value),a(o,s,n);break;case"Email":o=d(s.value),a(o,s,n)}}))}function a(e,t,n){e?(n.value<1?n.value=0:n.value--,r(t),t.classList.contains("input-error")&&t.classList.remove("input-error")):(n.value++,s(t),t.classList.add("input-error"))}function s(e){if(!e.nextElementSibling||!e.nextElementSibling.classList.contains("form-error")){let t=document.createElement("div");e.dataset.error?t.innerHTML=function(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return e.replace(/[&<>"'/]/gi,(e=>t[e]))}(e.dataset.error):t.innerHTML="",t.classList.add("form-error"),e.insertAdjacentElement("afterend",t)}}function r(e){e.nextElementSibling&&e.nextElementSibling.classList.contains("form-error")&&e.nextElementSibling.remove()}function i(e,t){for(let n=0;n<e.length;n++){const o=e[n];t[n]={type:o.split(":")[0],quantity:o.split(":")[1]}}}function l(e,t,n){for(const o in t){const a=t[o].type,i=t[o].quantity;"min-length"===a?e.value.length<i&&(n.value++,s(e),e.classList.add("input-error")):e.value.length>i&&(n.value++,s(e),e.classList.add("input-error")),e.addEventListener("change",(e=>{const t=e.target;switch(a){case"min-length":t.value.length<i?(n.value++,s(t),t.classList.add("input-error")):(n.value<1?n.value=0:n.value--,r(t),t.classList.contains("input-error")&&t.classList.remove("input-error"));break;case"max-length":t.value.length>i?(n.value++,s(t),t.classList.add("input-error")):(n.value<1?n.value=0:n.value--,r(t),t.classList.contains("input-error")&&t.classList.remove("input-error"))}}))}}function c(e){return/^\(?([+]?\d{2}\d*)?([0-9]{3})\)?[-.]?([0-9]{3})[-.]?([0-9]{4})$/.exec(e)}function d(e){return String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}}(),function(){let e=document.querySelectorAll("[data-date-picker]");if(e.length>0){for(let o=0;o<e.length;o++)n(e[o]);function n(e){const n=e.querySelector(".date-picker__selected"),o=e.querySelector(".date-picker__body"),a=o.querySelector(".date-picker__month"),s=["January","February","March","April","May","June","July","August","September","October","November","December"],r=e.dataset.datePicker?1:0;let i=new Date,l=i.getFullYear(),c=i.getMonth(),d=i;function u(){let e=o.querySelector(".date-picker__calendar"),t=function(e,t){return new Date(t,e,1).getDay()}(c,l);const n=function(e,t){return new Date(t,++e,0).getDate()}(c,l);e.querySelector("tbody")&&e.querySelector("tbody").remove();const a=document.createElement("tbody");let s=document.createElement("tr"),i=!1,d=1;for(let e=1;e<=n;e++)1===e&&0===t?(t=6,s.innerHTML+=`<td class="date-picker__day-empty" colspan=${t}></td>`):1===e&&0!==t&&(s.innerHTML+=`<td class="date-picker__day-empty" colspan=${t}></td>`),r?g(e,s):s.innerHTML+=`<td class="date-picker__day-number" tabindex="0" data-day-number="${e}">${e}</td>`,(t+d==7&&!i||d%7==0)&&(i=!0,a.append(s),s=document.createElement("tr"),d=0),++d;a.append(s),e.append(a)}function m(e=!0){e?++c>11&&(c=0,++l):--c<0&&(c=11,--l),i.setMonth(c),i.setFullYear(l),a.textContent=`${s[c]} ${l}`}function p(){const t=n.dataset.dateValue?n.dataset.dateValue:null;let[o,a,s]=String(t).split("-");const r=y();r.year===+o&&r.month===--a&&r.day===+s&&e.querySelector(`.date-picker__day-number[data-day-number="${+s}"]`).classList.add("selected-day")}function y(){return{day:d.getDate(),month:d.getMonth(),year:d.getFullYear()}}function g(e,t){const n=new Date;e<n.getDate()&&c===n.getMonth()&&l===n.getFullYear()?t.innerHTML+=`<td class="date-picker__day-number date-picker__day-number_disable"  tabindex="0" data-day-number="${e}">${e}</td>`:t.innerHTML+=`<td class="date-picker__day-number" tabindex="0" data-day-number="${e}">${e}</td>`}a.textContent=`${s[d.getMonth()]} ${d.getFullYear()}`,u(),""!=n.textContent&&p(),e.addEventListener("click",(function(o){let a=o.target;var s;a.closest(".date-picker__button")?(window.matchMedia("(max-width: 768px)").matches&&document.body.classList.toggle("_lock"),a.closest("[data-date-picker]").classList.toggle("show-date-picker")):a.classList.contains("date-picker__btn")?function(e){if(e.classList.contains("date-picker__btn_prev"))if(r){if(c===(new Date).getMonth()&&l===(new Date).getFullYear())return;m(!1)}else m(!1);else m();u(),p()}(a):a.classList.contains("date-picker__day-number")&&!a.classList.contains("date-picker__day-number_disable")&&(e.querySelector(".date-picker__day-number.selected-day")&&e.querySelector(".date-picker__day-number.selected-day").classList.remove("selected-day"),(s=+a.innerHTML)<=(new Date).getDate()?d.setDate((new Date).getDate()):d.setDate(s),d.setMonth(c),d.setFullYear(l),a.classList.add("selected-day"),function(e){const n=y();e.setAttribute("data-date-value",`${n.year}-${t(n.month+1)}-${t(n.day)}`),e.textContent=`${n.year}-${t(n.month+1)}-${t(n.day)}`}(n),e.classList.remove("show-date-picker"),document.body.classList.remove("_lock"))}))}}function t(e){return e>=10?e:`0${e}`}}(),function(){let e=document.querySelectorAll(".quantity__button");for(let t=0;t<e.length;t++){const n=e[t],o=+n.closest(".quantity").querySelector("input").value;n.addEventListener("click",(e=>{let t=parseInt(n.closest(".quantity").querySelector("input").value);n.classList.contains("quantity__button_plus")?t>=14||t++:(t--,t<o&&(t=o)),n.closest(".quantity").querySelector("input").value=t}))}}(),function(){const n=document.querySelectorAll("[data-spollers]");if(n.length>0){const o=Array.from(n).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));o.length>0&&s(o);const a=Array.from(n).filter((function(e,t,n){return e.dataset.spollers.split(",")[0]}));if(a.length>0){const c=[];a.forEach((e=>{const t={},n=e.dataset.spollers.split(",");t.value=n[0],t.type=n[1]?n[1].trim():"max",t.item=e,c.push(t)}));let d=c.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));d=d.filter((function(e,t,n){return n.indexOf(e)===t})),d.forEach((e=>{const t=e.split(","),n=t[1],o=t[2],a=window.matchMedia(t[0]),r=c.filter((function(e){if(e.value===n&&e.type===o)return!0}));a.addEventListener("change",(function(){s(r,a)})),s(r,a)}))}function s(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),r(e),e.addEventListener("click",i)):(e.classList.remove("_init"),r(e,!1),e.removeEventListener("click",i))}))}function r(e,t=!0){const n=e.querySelectorAll("[data-spoller]");n.length>0&&n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling?e.nextElementSibling.hidden=!0:e.previousElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling?e.nextElementSibling.hidden=!1:e.previousElementSibling.hidden=!1)}))}function i(e){const n=e.target;if(n.hasAttribute("data-spoller")||n.closest("[data-spoller]")){const o=n.hasAttribute("[data-spoller]")?n:n.closest("[data-spoller]"),a=o.closest("[data-spollers]"),s=!!a.hasAttribute("data-one-spoller");a.querySelectorAll("._slide").length||(s&&!o.classList.contains("_active")&&l(a),o.classList.toggle("_active"),o.nextElementSibling?t(o.nextElementSibling,500):t(o.previousElementSibling,500)),e.preventDefault()}}function l(t){const n=t.querySelector("[data-spoller]._active");n&&(n.classList.remove("_active"),spollerTitle.nextElementSibling?e(n.nextElementSibling,500):e(n.previousElementSibling,500))}}}(),function(){const e=document.querySelectorAll("[data-animate]");if(e.length>0)for(let n=0;n<e.length;n++){const o=e[n];let a=.5,s=o.offsetHeight/4;""!==o.dataset.animate&&(a=String(o.dataset.animate).split(",")[0],o.dataset.animateThreshold&&(a=String(o.dataset.animateThreshold).split(","))),new IntersectionObserver(t,{threshold:a,rootMargin:`${s}px 0px ${s}px 0px`}).observe(o)}function t(e,t){e.forEach((e=>{const n=e.target;let o=!0;""!==n.dataset.animate&&(o=!String(n.dataset.animate).split(",")[1]||String(n.dataset.animate).split(",")[1],o="true"===o),e.isIntersecting?(n.classList.add("_animate"),o||t.unobserve(n)):n.classList.remove("_animate")}))}}()}))})();